<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lcxs.mapper.finance.receiptBeanMapper" >
  <resultMap id="BaseResultMap" type="com.lcxs.model.finance.receiptBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Mar 21 10:29:57 CST 2018.
    -->
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="rid" property="rid" jdbcType="BIGINT" />
    <result column="shopname" property="shopname" jdbcType="VARCHAR" />
    <result column="productid" property="productid" jdbcType="BIGINT" />
    <result column="productname" property="productname" jdbcType="VARCHAR" />
    <result column="caseid" property="caseid" jdbcType="BIGINT" />
    <result column="tmoney" property="tmoney" jdbcType="DOUBLE" />
    <result column="jmoney" property="jmoney" jdbcType="DOUBLE" />
    <result column="channel" property="channel" jdbcType="VARCHAR" />
    <result column="realname" property="realname" jdbcType="VARCHAR" />
    <result column="phone" property="phone" jdbcType="VARCHAR" />
    <result column="status" property="status" jdbcType="INTEGER" />
    <result column="auditor" property="auditor" jdbcType="VARCHAR" />
    <result column="context" property="context" jdbcType="VARCHAR" />
    <result column="ttime" property="ttime" jdbcType="VARCHAR" />
    <result column="ctime" property="ctime" jdbcType="VARCHAR" />
    <result column="mtime" property="mtime" jdbcType="VARCHAR" />
    <result column="redmoney" property="redmoney" jdbcType="DOUBLE" />
    <result column="redid" property="redid" jdbcType="BIGINT" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Mar 21 10:29:57 CST 2018.
    -->
    id, rid, shopname, productid, productname, caseid, tmoney, jmoney, channel, realname, 
    phone, status, auditor, context, ttime, ctime, mtime, redmoney, redid
  </sql>
  
  <select id="selectByRid" resultMap="BaseResultMap" parameterType="java.lang.Long" >
    select 
    <include refid="Base_Column_List" />
    from c_receipt
    where rid = #{rid,jdbcType=BIGINT}
  </select>
  <select id="queryAll" resultType="com.lcxs.model.finance.receiptBean" parameterType="com.lcxs.utils.BaseConditionVO" >
    select
    <include refid="Base_Column_List" />
    from c_receipt
    <where>
	     status=#{keywordsstatus}
	    <if test="keywords!=null">
	    		and ( realname like "%"#{keywords}"%" or phone like "%"#{keywords}"%" or productname like "%"#{keywords}"%")
	    </if>
	    <if test="ctimepx!=null and ctimepx!='' and ctimepx%2!=0">
    	ORDER BY ctime desc
	    </if>
	    <if test="ctimepx!=null and ctimepx!='' and ctimepx%2!=1">
	    	ORDER BY ctime 
	    </if>
	    <if test="ttimepx!=null and ttimepx!='' and ttimepx%2!=0">
	    	ORDER BY ttime desc
	    </if>
	    <if test="ttimepx!=null and ttimepx!='' and ttimepx%2!=1">
	    	ORDER BY ttime 
	    </if>
    </where>
  </select>
  
  <select id="queryReceiptNumByVid" resultType="java.lang.Object" parameterType="java.lang.Long">
  select count(1) from c_receipt r 
  INNER JOIN c_user_receipt u on u.rid=r.rid and 
  u.vid=#{vid} and (r.status=1 or r.status=4)
  </select>
  
  <select id="queryToDayMoneyPerson" resultType="com.lcxs.model.finance.receiptBean" parameterType="com.lcxs.utils.BaseConditionVO">
  	SELECT 
	<include refid="Base_Column_List" />
 	FROM c_receipt 
 	WHERE <![CDATA[TO_DAYS(NOW()) - TO_DAYS(mtime) = 0 ]]> and status=4
  </select>
  
  <select id="queryToDayMoney" resultType="java.lang.Double">
  	SELECT SUM(jmoney) 
  	FROM c_receipt WHERE 
  	status=4
  </select>
  
  
  
  <select id="queryAnyDayOfReceipt" resultType="com.lcxs.model.finance.receiptBean" parameterType="com.lcxs.utils.BaseConditionVO">
  	select
  	<include refid="Base_Column_List" />
    from c_receipt 
    <where>
    	ctime BETWEEN #{keywordsname,jdbcType=VARCHAR} and #{keywordsnumber,jdbcType=VARCHAR}
    	and status=#{keywordsstatus}
    </where>
    ORDER BY ctime desc
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Mar 21 10:29:57 CST 2018.
    -->
    delete from c_receipt
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.lcxs.model.finance.receiptBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Mar 21 10:29:57 CST 2018.
    -->
    insert into c_receipt (id, rid, shopname, 
      productid, productname, caseid, 
      tmoney, jmoney, channel, 
      realname, phone, status, 
      auditor, context, ttime, 
      ctime, mtime, redmoney, 
      redid)
    values (#{id,jdbcType=BIGINT}, #{rid,jdbcType=BIGINT}, #{shopname,jdbcType=VARCHAR}, 
      #{productid,jdbcType=BIGINT}, #{productname,jdbcType=VARCHAR}, #{caseid,jdbcType=BIGINT}, 
      #{tmoney,jdbcType=DOUBLE}, #{jmoney,jdbcType=DOUBLE}, #{channel,jdbcType=VARCHAR}, 
      #{realname,jdbcType=VARCHAR}, #{phone,jdbcType=VARCHAR}, #{status,jdbcType=INTEGER}, 
      #{auditor,jdbcType=VARCHAR}, #{context,jdbcType=VARCHAR}, #{ttime,jdbcType=VARCHAR}, 
      #{ctime,jdbcType=VARCHAR}, #{mtime,jdbcType=VARCHAR}, #{redmoney,jdbcType=DOUBLE}, 
      #{redid,jdbcType=BIGINT})
  </insert>
  <insert id="insertSelective" parameterType="com.lcxs.model.finance.receiptBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Mar 21 10:29:57 CST 2018.
    -->
    insert into c_receipt
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="rid != null" >
        rid,
      </if>
      <if test="shopname != null" >
        shopname,
      </if>
      <if test="productid != null" >
        productid,
      </if>
      <if test="productname != null" >
        productname,
      </if>
      <if test="caseid != null" >
        caseid,
      </if>
      <if test="tmoney != null" >
        tmoney,
      </if>
      <if test="jmoney != null" >
        jmoney,
      </if>
      <if test="channel != null" >
        channel,
      </if>
      <if test="realname != null" >
        realname,
      </if>
      <if test="phone != null" >
        phone,
      </if>
      <if test="status != null" >
        status,
      </if>
      <if test="auditor != null" >
        auditor,
      </if>
      <if test="context != null" >
        context,
      </if>
      <if test="ttime != null" >
        ttime,
      </if>
      <if test="ctime != null" >
        ctime,
      </if>
      <if test="mtime != null" >
        mtime,
      </if>
      <if test="redmoney != null" >
        redmoney,
      </if>
      <if test="redid != null" >
        redid,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=BIGINT},
      </if>
      <if test="rid != null" >
        #{rid,jdbcType=BIGINT},
      </if>
      <if test="shopname != null" >
        #{shopname,jdbcType=VARCHAR},
      </if>
      <if test="productid != null" >
        #{productid,jdbcType=BIGINT},
      </if>
      <if test="productname != null" >
        #{productname,jdbcType=VARCHAR},
      </if>
      <if test="caseid != null" >
        #{caseid,jdbcType=BIGINT},
      </if>
      <if test="tmoney != null" >
        #{tmoney,jdbcType=DOUBLE},
      </if>
      <if test="jmoney != null" >
        #{jmoney,jdbcType=DOUBLE},
      </if>
      <if test="channel != null" >
        #{channel,jdbcType=VARCHAR},
      </if>
      <if test="realname != null" >
        #{realname,jdbcType=VARCHAR},
      </if>
      <if test="phone != null" >
        #{phone,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        #{status,jdbcType=INTEGER},
      </if>
      <if test="auditor != null" >
        #{auditor,jdbcType=VARCHAR},
      </if>
      <if test="context != null" >
        #{context,jdbcType=VARCHAR},
      </if>
      <if test="ttime != null" >
        #{ttime,jdbcType=VARCHAR},
      </if>
      <if test="ctime != null" >
        #{ctime,jdbcType=VARCHAR},
      </if>
      <if test="mtime != null" >
        #{mtime,jdbcType=VARCHAR},
      </if>
      <if test="redmoney != null" >
        #{redmoney,jdbcType=DOUBLE},
      </if>
      <if test="redid != null" >
        #{redid,jdbcType=BIGINT},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.lcxs.model.finance.receiptBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Mar 21 10:29:57 CST 2018.
    -->
    update c_receipt
    <set >
      <if test="shopname != null" >
        shopname = #{shopname,jdbcType=VARCHAR},
      </if>
      <if test="productid != null" >
        productid = #{productid,jdbcType=BIGINT},
      </if>
      <if test="productname != null" >
        productname = #{productname,jdbcType=VARCHAR},
      </if>
      <if test="caseid != null" >
        caseid = #{caseid,jdbcType=BIGINT},
      </if>
      <if test="tmoney != null" >
        tmoney = #{tmoney,jdbcType=DOUBLE},
      </if>
      <if test="jmoney != null" >
        jmoney = #{jmoney,jdbcType=DOUBLE},
      </if>
      <if test="channel != null" >
        channel = #{channel,jdbcType=VARCHAR},
      </if>
      <if test="realname != null" >
        realname = #{realname,jdbcType=VARCHAR},
      </if>
      <if test="phone != null" >
        phone = #{phone,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        status = #{status,jdbcType=INTEGER},
      </if>
      <if test="auditor != null" >
        auditor = #{auditor,jdbcType=VARCHAR},
      </if>
      <if test="context != null" >
        context = #{context,jdbcType=VARCHAR},
      </if>
      <if test="ttime != null" >
        ttime = #{ttime,jdbcType=VARCHAR},
      </if>
      <if test="ctime != null" >
        ctime = #{ctime,jdbcType=VARCHAR},
      </if>
      <if test="mtime != null" >
        mtime = #{mtime,jdbcType=VARCHAR},
      </if>
      <if test="redmoney != null" >
        redmoney = #{redmoney,jdbcType=DOUBLE},
      </if>
      <if test="redid != null" >
        redid = #{redid,jdbcType=BIGINT},
      </if>
    </set>
    where rid = #{rid,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.lcxs.model.finance.receiptBean" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Mar 21 10:29:57 CST 2018.
    -->
    update c_receipt
    set rid = #{rid,jdbcType=BIGINT},
      shopname = #{shopname,jdbcType=VARCHAR},
      productid = #{productid,jdbcType=BIGINT},
      productname = #{productname,jdbcType=VARCHAR},
      caseid = #{caseid,jdbcType=BIGINT},
      tmoney = #{tmoney,jdbcType=DOUBLE},
      jmoney = #{jmoney,jdbcType=DOUBLE},
      channel = #{channel,jdbcType=VARCHAR},
      realname = #{realname,jdbcType=VARCHAR},
      phone = #{phone,jdbcType=VARCHAR},
      status = #{status,jdbcType=INTEGER},
      auditor = #{auditor,jdbcType=VARCHAR},
      context = #{context,jdbcType=VARCHAR},
      ttime = #{ttime,jdbcType=VARCHAR},
      ctime = #{ctime,jdbcType=VARCHAR},
      mtime = #{mtime,jdbcType=VARCHAR},
      redmoney = #{redmoney,jdbcType=DOUBLE},
      redid = #{redid,jdbcType=BIGINT}
    where id = #{id,jdbcType=BIGINT}
  </update>
</mapper>